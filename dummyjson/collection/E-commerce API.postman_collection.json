{
	"info": {
		"_postman_id": "08668d3c-16a3-47f7-825a-7bfcd8bce962",
		"name": "E-commerce API",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "38123017"
	},
	"item": [
		{
			"name": "AUTH",
			"item": [
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"Access token exists\", function () {\r",
									"    pm.expect(json.accessToken).to.be.a(\"string\");\r",
									"    });\r",
									"\r",
									"pm.test(\"Refresh token exists\", function () {\r",
									"    pm.expect(json.refreshToken).to.be.a(\"string\");\r",
									"    }); \r",
									"\r",
									"pm.environment.set(\"access_token\", json.accessToken);\r",
									"pm.environment.set(\"refresh_token\", json.refreshToken);\r",
									"\r",
									"pm.environment.set(\"user_id\", json.id);\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"username\": \"emilys\",\r\n    \"password\": \"emilyspass\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "Login neg",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 401\", function () {\r",
									"    pm.response.to.have.status(401);\r",
									"});\r",
									"\r",
									"pm.test(\"Error message exists\", function () {\r",
									"    const response = pm.response.json();\r",
									"    pm.expect(response).to.have.property(\"message\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"username\": \"serega\",\r\n    \"password\": \"wrong\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "Refresh",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response is JSON\", function () {\r",
									"    pm.response.to.be.json;\r",
									"});\r",
									"\r",
									"const response = pm.response.json();\r",
									"\r",
									"pm.test(\"Refresh response has tokens\", function () {\r",
									"    pm.expect(response).to.have.property(\"accessToken\");\r",
									"    pm.expect(response).to.have.property(\"refreshToken\");\r",
									"});\r",
									"\r",
									"pm.environment.set(\"access_token\", response.accessToken);\r",
									"pm.environment.set(\"refresh_token\", response.refreshToken);\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"refreshToken\": \"{{refreshToken}}\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/auth/refresh",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"refresh"
							]
						}
					},
					"response": []
				},
				{
					"name": "Logout",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 or 204\", function () {\r",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 204]);\r",
									"});\r",
									"\r",
									"pm.environment.unset(\"access_token\");\r",
									"pm.environment.unset(\"refresh_token\");"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"refreshToken\": \"{{refresh_token}}\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/auth/logout",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"logout"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "USERS",
			"item": [
				{
					"name": "Profile",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"const user = pm.response.json();\r",
									"\r",
									"pm.test(\"User id mathches logged in user\", function () {\r",
									"    pm.expect(user.id).to.eql(Number(pm.environment.get(\"user_id\")));\r",
									"});\r",
									"\r",
									"pm.test(\"Username exists\", function () {\r",
									"    pm.expect(user.username).to.be.a(\"string\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/me",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"me"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "PRODUCTS",
			"item": [
				{
					"name": "Products list",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response time is less than 500ms\", function () {\r",
									"    pm.expect(pm.response.responseTime).to.be.below(500);\r",
									"});\r",
									"\r",
									"pm.test(\"Response is JSON\", function () {\r",
									"    pm.response.to.be.json;\r",
									"});\r",
									"\r",
									"const response = pm.response.json();\r",
									"\r",
									"pm.test(\"Products array exists\", function () {\r",
									"    pm.expect(response.products).to.be.an(\"array\");\r",
									"});\r",
									"\r",
									"pm.test(\"Products array is not empty\", function () {\r",
									"    pm.expect(response.products.length).to.be.above(0);\r",
									"});\r",
									"\r",
									"const product = response.products[0];\r",
									"\r",
									"pm.test(\"Product has required fields\", function () {\r",
									"    pm.expect(product).to.have.property(\"id\");\r",
									"    pm.expect(product).to.have.property(\"title\");\r",
									"    pm.expect(product).to.have.property(\"price\");\r",
									"    pm.expect(product).to.have.property(\"category\");\r",
									"});\r",
									"\r",
									"pm.test(\"Product fields have correct types\", function () {\r",
									"    pm.expect(product.id).to.be.a(\"number\");\r",
									"    pm.expect(product.title).to.be.a(\"string\");\r",
									"    pm.expect(product.price).to.be.a(\"number\");\r",
									"    pm.expect(product.category).to.be.a(\"string\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add product",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 or 201\", function () {\r",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 201]);\r",
									"});\r",
									"\r",
									"pm.test(\"Response is JSON\", function () {\r",
									"    pm.response.to.be.json;\r",
									"});\r",
									"\r",
									"const product = pm.response.json();\r",
									"\r",
									"pm.test(\"Product has required fields\", function () {\r",
									"    pm.expect(product).to.have.property(\"id\");\r",
									"    pm.expect(product).to.have.property(\"title\");\r",
									"    pm.expect(product).to.have.property(\"price\");\r",
									"});\r",
									"\r",
									"pm.test(\"Product created with correct data\", function () {\r",
									"    pm.expect(product.title).to.eql(\"New Test Product\");\r",
									"    pm.expect(product.price).to.eql(777);\r",
									"});\r",
									"\r",
									"pm.environment.set(\"created_product_id\", product.id);\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"title\": \"New Test Product\",\r\n    \"price\": 777,\r\n    \"description\": \"qwerty\",\r\n    \"category\": \"beauty\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products/add",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"add"
							]
						}
					},
					"response": []
				},
				{
					"name": "Products by id",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response is JSON\", function () {\r",
									"    pm.response.to.be.json;\r",
									"});\r",
									"\r",
									"const product = pm.response.json();\r",
									"\r",
									"pm.test(\"Product has required fields\", function () {\r",
									"    pm.expect(product).to.have.property(\"id\");\r",
									"    pm.expect(product).to.have.property(\"title\");\r",
									"    pm.expect(product).to.have.property(\"price\");\r",
									"    pm.expect(product).to.have.property(\"category\");\r",
									"});\r",
									"\r",
									"pm.test(\"Product fields have correct types\", function () {\r",
									"    pm.expect(product.id).to.be.a(\"number\");\r",
									"    pm.expect(product.title).to.be.a(\"string\");\r",
									"    pm.expect(product.price).to.be.a(\"number\");\r",
									"    pm.expect(product.category).to.be.a(\"string\");\r",
									"});\r",
									"\r",
									"pm.environment.set(\"product_id\", product.id);\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products/{{created_product_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"{{created_product_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Products by id Negative",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 404\", function () {\r",
									"    pm.response.to.have.status(404);\r",
									"});\r",
									"\r",
									"const response = pm.response.json();\r",
									"\r",
									"pm.test(\"Error response has message\", function () {\r",
									"    pm.expect(response).to.have.property(\"message\");\r",
									"    pm.expect(response.message).to.be.a(\"string\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products/{{negative_product_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"{{negative_product_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add product Negative",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code have 400 or 404\", function () {\r",
									"    pm.expect.(pm.response.code).to.be.oneOf([200, 201]);\r",
									"});\r",
									"\r",
									"const response = pm.response.json();\r",
									"\r",
									"pm.test(\"Error message exists\", function () {\r",
									"    pm.expect(response).to.have.property(\"message\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"price\": 555,\r\n    \"description\": \"Negative description\",\r\n    \"category\": \"beauty\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products/add",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"add"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update product",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"const response = pm.response.json();\r",
									"\r",
									"pm.test(\"Product updated succesfully\", function () {\r",
									"    pm.expect(response.title).to.eql(\"Updated product\");\r",
									"    pm.expect(response.price).to.eql(999);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"title\": \"Updated product\",\r\n    \"price\": 999\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products/{{product_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"{{product_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Products by id upd",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"const product = pm.response.json();\r",
									"\r",
									"pm.test(\"Product has updated values\", function () {\r",
									"    pm.expect(product.id).to.eql(\"Updated product\");\r",
									"    pm.expect(product.price).to.eql(999);\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products/{{product_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"{{product_id}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "CATEGORIES",
			"item": [
				{
					"name": "Categories all",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response is JSON\", function () {\r",
									"    pm.response.to.be.json;\r",
									"});\r",
									"\r",
									"const categories = pm.response.json();\r",
									"\r",
									"pm.test(\"Category response is array\", function () {\r",
									"    pm.expect(categories).to.be.an(\"array\");\r",
									"    pm.expect(categories.length).to.be.above(0);\r",
									"});\r",
									"\r",
									"pm.test(\"Category object has required fields\", function () {\r",
									"    const object = categories[0];\r",
									"\r",
									"    pm.expect(object).to.have.property(\"slug\");\r",
									"    pm.expect(object).to.have.property(\"name\");\r",
									"    pm.expect(object).to.have.property(\"url\");\r",
									"    pm.expect(object.slug).to.be.a(\"string\");\r",
									"});\r",
									"\r",
									"pm.environment.set(\"category_name\", categories[0].slug);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products/categories",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"categories"
							]
						}
					},
					"response": []
				},
				{
					"name": "Categories",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response is JSON\", function () {\r",
									"    pm.response.to.be.json;\r",
									"});\r",
									"\r",
									"const response = pm.response.json();\r",
									"\r",
									"pm.test(\"Response is object\", function () {\r",
									"    pm.expect(response).to.be.an(\"object\");\r",
									"});\r",
									"\r",
									"pm.test(\"Response has required fields\", function () {\r",
									"    pm.expect(response).to.have.property(\"products\");\r",
									"    pm.expect(response).to.have.property(\"total\");\r",
									"    pm.expect(response).to.have.property(\"skip\");\r",
									"    pm.expect(response).to.have.property(\"limit\");\r",
									"});\r",
									"\r",
									"pm.test(\"Fields have correct types\", function () {\r",
									"    pm.expect(response.products).to.be.an(\"array\");\r",
									"    pm.expect(response.total).to.be.a(\"number\");\r",
									"    pm.expect(response.skip).to.be.a(\"number\");\r",
									"    pm.expect(response.limit).to.be.a(\"number\");\r",
									"});\r",
									"\r",
									"if (response.products.length > 0) {\r",
									"    pm.test(\"First product has required fields\", function () {\r",
									"        const product = response.products[0];\r",
									"\r",
									"        pm.expect(product).to.have.property(\"id\");\r",
									"        pm.expect(product).to.have.property(\"title\");\r",
									"        pm.expect(product).to.have.property(\"price\");\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products/category/{{category_name}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"category",
								"{{category_name}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "CART",
			"item": [
				{
					"name": "User cart",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"const json = pm.response.json();\r",
									"\r",
									"pm.test(\"Carts exists and is array\", function () {\r",
									"    pm.expect(json.carts).to.be.an(\"array\");\r",
									"});\r",
									"\r",
									"pm.test(\"Total matches carts length\", function () {\r",
									"    pm.expect(json.total).to.eql(json.carts.length);\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/carts/user/{{user_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"carts",
								"user",
								"{{user_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add to cart",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is correct for create\", function () {\r",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 201]);\r",
									"});\r",
									"\r",
									"pm.test(\"Response is JSON\", function () {\r",
									"    pm.response.to.be.json;\r",
									"});\r",
									"\r",
									"const response = pm.response.json();\r",
									"\r",
									"pm.test(\"Cart has required fields\", function () {\r",
									"    pm.expect(response).to.have.property(\"id\");\r",
									"    pm.expect(response).to.have.property(\"products\");\r",
									"    pm.expect(response).to.have.property(\"total\");\r",
									"    pm.expect(response).to.have.property(\"userId\");\r",
									"});\r",
									"\r",
									"pm.test(\"Cart fields have correct types\", function () {\r",
									"    pm.expect(response.id).to.be.a(\"number\");\r",
									"    pm.expect(response.userId).to.be.a(\"number\");\r",
									"    pm.expect(response.products).to.be.an(\"array\");\r",
									"    pm.expect(response.total).to.be.a(\"number\");\r",
									"});\r",
									"\r",
									"pm.test(\"Product in cart is correct\", function () {\r",
									"    const product = response.products[0];\r",
									"\r",
									"    pm.expect(product).to.have.property(\"id\");\r",
									"    pm.expect(product).to.have.property(\"quantity\");\r",
									"    pm.expect(product).to.have.property(\"price\");\r",
									"\r",
									"    pm.expect(product.id).to.be.a(\"number\");\r",
									"    pm.expect(product.quantity).to.be.a(\"number\");\r",
									"    pm.expect(product.price).to.be.a(\"number\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"userId\": {{user_id}},\r\n    \"products\": [\r\n        {\r\n            \"id\": {{product_id}},\r\n            \"quantity\": 2\r\n        }\r\n    ]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/carts/add",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"carts",
								"add"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "FULLCYCLE",
			"item": [
				{
					"name": "create product",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", function () {\r",
									"    pm.response.to.have.status(201);\r",
									"});\r",
									"\r",
									"const response = pm.response.json();\r",
									"\r",
									"pm.test(\"Product created successfully\", function () {\r",
									"    pm.expect(response.id).to.be.a(\"number\");\r",
									"});\r",
									"\r",
									"pm.environment.set(\"fc_created_product_id\", response.id);\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"title\": \"Portfolio product\",\r\n    \"price\": 777\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products/add",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"add"
							]
						}
					},
					"response": []
				},
				{
					"name": "get product",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"const product = pm.response.json();\r",
									"\r",
									"pm.test(\"Product has required fields\", function () {\r",
									"    pm.expect(product).to.have.property(\"id\");\r",
									"    pm.expect(product).to.have.property(\"title\");\r",
									"    pm.expect(product).to.have.property(\"price\");\r",
									"    pm.expect(product).to.have.property(\"category\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products/{{fc_created_product_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"{{fc_created_product_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "delete product",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code 204\", function () {\r",
									"    pm.response.to.have.status(204);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products/{{fc_created_product_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"{{fc_created_product_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "get product after del",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 404 after deletion\", function () {\r",
									"    pm.response.to.have.status(404);\r",
									"});\r",
									"\r",
									"const response = pm.response.json();\r",
									"\r",
									"pm.test(\"Error message exists\", function () {\r",
									"    pm.expect(response).to.have.property(\"message\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products/{{fc_created_product_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"{{fc_created_product_id}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "NEGATIVE",
			"item": [
				{
					"name": "Create product neg",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 400 or 404\", function () {\r",
									"    pm.expect(pm.response.code).to.be.oneOf([400, 404]);\r",
									"});\r",
									"\r",
									"pm.test(\"Response is JSON\", function () {\r",
									"    pm.response.to.be.json;\r",
									"});\r",
									"\r",
									"// fro MOCK API\r",
									"\r",
									"const response = pm.response.json();\r",
									"\r",
									"pm.test(\"Error response has message\", function () {\r",
									"    pm.expect(response).to.have.property(\"message\");\r",
									"    pm.expect(response.message).to.be.a(\"string\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"title\": \"serega qa !@#$%^&*()\",\r\n    \"price\": 373\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products/add",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"add"
							]
						}
					},
					"response": []
				},
				{
					"name": "Product price minus",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.expect(pm.response.code).to.have.status(400);\r",
									"});\r",
									"\r",
									"// for MOCK API\r",
									"\r",
									"let response = pm.response.json ();\r",
									"\r",
									"pm.test(\"API incorrectly allows negative price\", function () {\r",
									"    pm.expect(response.price).to.be.below(0);\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"title\": \"Negative price product\",\r\n    \"price\": -100\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products/add",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"add"
							]
						}
					},
					"response": []
				},
				{
					"name": "Missing title",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 400 or 422\", function () {\r",
									"    pm.expect(pm.response.code).to.be.oneOf([400, 422]);\r",
									"});\r",
									"\r",
									"pm.test(\"Response is JSON\", function () {\r",
									"    pm.response.to.be.json;\r",
									"});\r",
									"\r",
									"// for MOCK API\r",
									"\r",
									"let response = pm.response.json ();\r",
									"\r",
									"pm.test(\"Title is really missing\", function () {\r",
									"    pm.expect(response.title).to.not.exist;\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"price\": 999\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products/add",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"add"
							]
						}
					},
					"response": []
				},
				{
					"name": "Invalid token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Should return 401 for invalid token\", function () {\r",
									"     pm.response.to.have.status(401);\r",
									"});\r",
									"\r",
									"//for MOCK API\r",
									"\r",
									"let json = pm.response.json ();\r",
									"\r",
									"pm.test(\"Message of mistake is correctly\", function () {\r",
									"    pm.expect(json.message).to.exist;\r",
									"    pm.expect(json).to.have.property(\"message\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "invalid_token_123456",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/auth/me",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"me"
							]
						}
					},
					"response": []
				},
				{
					"name": "Qantity minus",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Should not allow negative quantity\", function () {\r",
									"    pm.expect(pm.response.code).to.be.oneOf([400, 422]);\r",
									"});\r",
									"\r",
									"//for MOCK API\r",
									"\r",
									"let json = pm.response.json ();\r",
									"\r",
									"pm.test(\"API allows negative quantity\", function () {\r",
									"    pm.expect(json.products[0].quantity).to.be.below(0);\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"userId\": {{user_id}},\r\n    \"products\": [\r\n        {\r\n            \"id\": {{product_id}},\r\n            \"quantity\": -7\r\n        }\r\n    ]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/carts/add",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"carts",
								"add"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Collection runner",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"collection executed successfully\", function () {\r",
							"    pm.expect(true).to.be.true;\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/products",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"products"
					]
				}
			},
			"response": []
		}
	],
	"auth": {
		"type": "inherit"
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					"const token = pm.environment.get(\"access_token\");\r",
					"\r",
					"if (token) {\r",
					"    pm.request.headers.upsert({\r",
					"        key: \"Authorization\",\r",
					"        value: \"Bearer \" + token\r",
					"    });\r",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "https://dummyjson.com",
			"type": "string"
		}
	]
}